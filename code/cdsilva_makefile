LDFLAGS = -lm 

MPICXX=mpic++

MPICXXFLAGS = -O3 -lstdc++ -Wno-deprecated -std=c++11 

#change this to point to the location of google tests files
GTEST_DIR = /home/cdsilva/googletest-read-only

GTEST_HEADERS = $(GTEST_DIR)/include/gtest/*.h \
                $(GTEST_DIR)/include/gtest/internal/*.h

GTESTFLAGS = -I$(GTEST_DIR)/include -lpthread

all: main

%.o : %.cpp
	$(MPICXX) $(MPICXXFLAGS) -c $< 

tests.o : tests.cpp $(GTEST_HEADERS)
	$(MPICXX) $(GTESTFLAGS) $(MPICXXFLAGS) -c tests.cpp

tests : tests.o system.o  bond.o integrator.o interaction.o  misc.o pair_potential.o atom.o $(GTEST_DIR)/make/gtest_main.a
	$(MPICXX) -o $@ $^ $(GTESTFLAGS) $(MPICXXFLAGS) 

main : main.o system.o misc.o integrator.o interaction.o  atom.o 
	$(MPICXX) -o $@ $^ $(GTESTFLAGS) $(MPICXXFLAGS) 

clean:
	$(RM) *.o
	$(RM) .depend
